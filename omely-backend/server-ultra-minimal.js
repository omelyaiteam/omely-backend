// SERVEUR ULTRA-MINIMAL - JUSTE POUR LES HEALTH CHECKS
import http from 'http';

const PORT = process.env.PORT || 3000;

const server = http.createServer((req, res) => {
  console.log(`${new Date().toISOString()} - ${req.method} ${req.url}`);

  if (req.url === '/health' && req.method === 'GET') {
    res.writeHead(200, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify({
      status: 'OK',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      version: 'ultra-minimal',
      environment: {
        NODE_ENV: process.env.NODE_ENV,
        PORT: process.env.PORT
      }
    }));
  } else if (req.url === '/test' && req.method === 'GET') {
    res.writeHead(200, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify({
      message: 'Serveur ultra-minimal fonctionne !',
      timestamp: new Date().toISOString()
    }));
  } else {
    res.writeHead(404, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify({ error: 'Not found' }));
  }
});

server.listen(PORT, () => {
  console.log(`ğŸš€ SERVEUR ULTRA-MINIMAL DÃ‰MARRÃ‰`);
  console.log(`ğŸ“ Port: ${PORT}`);
  console.log(`ğŸ¥ Health: http://localhost:${PORT}/health`);
  console.log(`ğŸ§ª Test: http://localhost:${PORT}/test`);
  console.log(`ğŸŒ Environnement: ${process.env.NODE_ENV || 'development'}`);
  console.log(`ğŸ”— Adresse: 0.0.0.0:${PORT}`);
});


