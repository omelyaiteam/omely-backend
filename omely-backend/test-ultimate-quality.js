// TEST ULTIME DE QUALIT√â - R√âSUM√âS ULTRA-EXHAUSTIFS

import { extractCompleteBookContent } from './utils/openaiService.js';
import dotenv from 'dotenv';

dotenv.config();

// Texte test tr√®s riche en d√©tails pour v√©rifier l'extraction exhaustive
const ultraRichBookText = `
INTRODUCTION: LES SECRETS DES MILLIONNAIRES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Ce livre r√©v√®le les 17 fa√ßons de penser qui s√©parent les riches des pauvres et de la classe moyenne.

CHAPITRE 1: LE PLAN FINANCIER INT√âRIEUR

‚ïê‚ïê‚ïê ENCADR√â CRUCIAL ‚ïê‚ïê‚ïê
R√àGLE FONDAMENTALE: "Votre revenu ne peut cro√Ætre que dans la mesure o√π vous croissez vous-m√™me."
- Si vous voulez changer les fruits, changez d'abord les racines
- Si vous voulez changer le visible, changez d'abord l'invisible
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

T. Harv Eker explique: "Si votre plan financier inconscient n'est pas r√©gl√© pour la r√©ussite, rien de ce que vous apprendrez, rien de ce que vous saurez et rien de ce que vous ferez ne fera vraiment de diff√©rence."

STATISTIQUE CHOC: 80% des gens ne conna√Ætront jamais l'autonomie financi√®re qu'ils aimeraient conna√Ætre.

DIFF√âRENCES FONDAMENTALES:

LES RICHES pensent:
- "Je cr√©e ma vie"
- "Comment puis-je me permettre cela?"
- "L'argent est un outil puissant"

LES PAUVRES pensent:
- "La vie m'arrive"
- "Je n'ai pas les moyens"
- "L'argent est la racine de tous les maux"

LA CLASSE MOYENNE pense:
- "Je dois travailler dur pour r√©ussir"
- "L'argent ne fait pas le bonheur"

EXERCICE PRATIQUE #1: LES D√âCLARATIONS
R√©p√©tez 3 fois par jour:
1. "J'ai un esprit millionnaire!"
2. "Je r√©ussis financi√®rement!"
3. "J'agis en d√©pit de la peur!"

CHAPITRE 2: LES 17 FA√áONS DE PENSER

‚ïê‚ïê‚ïê DIFF√âRENCE #1 ‚ïê‚ïê‚ïê
Les riches croient: "Je cr√©e ma vie"
Les pauvres croient: "La vie m'arrive"
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

HISTOIRE MARQUANTE: L'auteur raconte qu'√† l'√¢ge de 2 ans et demi, ses parents ont divorc√©. Son p√®re lui a dit: "Les riches sont avides et m√©chants. Il faut √™tre malhonn√™te pour devenir riche." Cette programmation l'a sabot√©e pendant des ann√©es.

TECHNIQUE DE D√âPROGRAMMATION:
1. Identifiez vos croyances limitantes
2. Questionnez leur v√©racit√©
3. Remplacez-les par des croyances habilitantes

‚ïê‚ïê‚ïê DIFF√âRENCE #2 ‚ïê‚ïê‚ïê
Les riches se concentrent sur les opportunit√©s
Les pauvres se concentrent sur les obstacles
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Warren Buffett dit: "Le risque vient de ne pas savoir ce que vous faites."

EXEMPLE CONCRET: Quand l'auteur a voulu acheter sa premi√®re propri√©t√© d'investissement, il n'avait pas d'argent pour la mise de fonds. Au lieu de dire "Je n'ai pas les moyens", il a demand√© "Comment puis-je obtenir cette mise de fonds?" Il a trouv√© un partenaire qui avait l'argent.

‚ïê‚ïê‚ïê DIFF√âRENCE #3 ‚ïê‚ïê‚ïê
Les riches s'associent avec des gens positifs qui r√©ussissent
Les pauvres s'associent avec des gens n√©gatifs ou qui √©chouent
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Jim Rohn: "Vous √™tes la moyenne des cinq personnes avec qui vous passez le plus de temps."

PLAN D'ACTION IMM√âDIAT:
SEMAINE 1-2: Identifiez les 5 personnes avec qui vous passez le plus de temps
SEMAINE 3-4: √âvaluez leur influence sur votre succ√®s financier
MOIS 2: Commencez √† vous √©loigner des influences n√©gatives
MOIS 3: Recherchez activement des mentors et des mod√®les de r√©ussite

CHAPITRE 3: GESTION DE L'ARGENT

‚ïê‚ïê‚ïê SYST√àME DE POTS ‚ïê‚ïê‚ïê
Divisez vos revenus ainsi:
- 55% N√©cessit√©s (loyer, nourriture, transport)
- 10% Autonomie financi√®re (investissements long terme)
- 10% Plaisir (d√©penses amusantes)
- 10% √âducation financi√®re (livres, cours, s√©minaires)
- 10% Dons et contributions
- 5% Urgences
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

R√àGLE D'OR DE L'INVESTISSEMENT: "Ne jamais investir dans quelque chose que vous ne comprenez pas." - Warren Buffett

TECHNIQUE DES COMPTES MULTIPLES:
1. Ouvrez 6 comptes bancaires diff√©rents
2. Automatisez les transferts selon les pourcentages
3. Respectez religieusement chaque enveloppe

HISTOIRE INSPIRANTE: L'auteur conna√Æt un homme qui gagne 30 000$ par an mais qui a r√©ussi √† √©conomiser 40 000$ en 4 ans gr√¢ce √† ce syst√®me. Il gagne moins que beaucoup de gens mais accumule plus de richesse.

CALCUL MAGIQUE: Si vous √©conomisez seulement 100$ par mois et l'investissez √† 8% d'int√©r√™t compos√©, vous aurez:
- Apr√®s 10 ans: 18 294$
- Apr√®s 20 ans: 58 902$
- Apr√®s 30 ans: 149 035$
- Apr√®s 40 ans: 349 101$

CHAPITRE 4: CR√âATION DE REVENUS PASSIFS

‚ïê‚ïê‚ïê D√âFINITION CLAIRE ‚ïê‚ïê‚ïê
REVENU PASSIF: Argent qui rentre sans que vous ayez √† travailler pour l'obtenir.
Exemples:
- Revenus locatifs
- Dividendes d'actions
- Royalties de livres/brevets
- Business automatis√©s
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Robert Kiyosaki: "Les pauvres et la classe moyenne travaillent pour l'argent. Les riches font travailler l'argent pour eux."

OBJECTIF ULTIME: Atteindre le point o√π vos revenus passifs d√©passent vos d√©penses. C'est la libert√© financi√®re!

FORMULE MAGIQUE:
Libert√© Financi√®re = Revenus Passifs > D√©penses Mensuelles

PLAN D'ACTION 12 MOIS:
MOIS 1-3: R√©duire les d√©penses de 20%
MOIS 4-6: Augmenter les revenus de 30%
MOIS 7-9: Investir la diff√©rence dans des actifs g√©n√©rateurs de revenus
MOIS 10-12: R√©investir tous les profits pour acc√©l√©rer la croissance

CONCLUSION: LA TRANSFORMATION

‚ïê‚ïê‚ïê ENGAGEMENT FINAL ‚ïê‚ïê‚ïê
"√Ä partir d'aujourd'hui, je m'engage √†:
1. Penser comme un millionnaire
2. Agir comme un millionnaire
3. Devenir un millionnaire"
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

DERNI√àRE CITATION: "Si vous continuez √† faire ce que vous avez toujours fait, vous obtiendrez toujours ce que vous avez toujours obtenu. Si vous voulez quelque chose que vous n'avez jamais eu, vous devez faire quelque chose que vous n'avez jamais fait."

TRANSFORMATION PROMISE: En appliquant ces principes, l'auteur garantit que vous pouvez multiplier vos revenus par 10 en moins de 5 ans.

RESSOURCES RECOMMAND√âES:
- "P√®re riche, p√®re pauvre" par Robert Kiyosaki
- "R√©fl√©chissez et devenez riche" par Napoleon Hill
- S√©minaire "Millionaire Mind Intensive" par l'auteur
- Formation "Guerrilla Business School"
`;

async function testUltimateQuality() {
  console.log('üéØ TEST ULTIME DE QUALIT√â - EXTRACTION EXHAUSTIVE');
  console.log('================================================\n');
  
  const startTime = Date.now();
  
  try {
    console.log('üìö Texte ultra-riche:', ultraRichBookText.length, 'caract√®res');
    console.log('üîç √âl√©ments √† extraire:');
    console.log('   - 4 encadr√©s sp√©ciaux');
    console.log('   - 15+ citations exactes');
    console.log('   - 3 exercices pratiques d√©taill√©s');
    console.log('   - 10+ statistiques et calculs');
    console.log('   - 5+ histoires et exemples');
    console.log('   - Plans d\'action √©tape par √©tape');
    console.log('   - Diff√©rences riches/pauvres/classe moyenne');
    console.log('   - Ressources et r√©f√©rences\n');
    
    console.log('‚ö° Lancement extraction ULTRA-EXHAUSTIVE...\n');
    
    const result = await extractCompleteBookContent(ultraRichBookText, 'Les Secrets des Millionnaires (Test Ultime)');
    
    const totalTime = Date.now() - startTime;
    
    if (result.success) {
      console.log('üéâ EXTRACTION R√âUSSIE !');
      console.log(`‚ö° Temps: ${totalTime}ms`);
      console.log(`üìä M√©thode: ${result.metadata.extractionMethod}`);
      console.log(`‚ú® Qualit√©: ${result.metadata.quality}\n`);
      
      const summary = result.completeSummary;
      console.log('üìÑ R√âSUM√â ULTRA-D√âTAILL√â G√âN√âR√â:');
      console.log('================================');
      console.log(summary);
      console.log('\n================================\n');
      
      // V√âRIFICATIONS DE QUALIT√â ULTRA-STRICTES
      console.log('üîç V√âRIFICATIONS QUALIT√â ULTRA-STRICTES:');
      console.log('========================================');
      
      const lowerSummary = summary.toLowerCase();
      
      const qualityChecks = [
        // Encadr√©s sp√©ciaux
        { name: 'Encadr√© "R√àGLE FONDAMENTALE" extrait', test: lowerSummary.includes('r√®gle fondamentale') || lowerSummary.includes('votre revenu ne peut cro√Ætre') },
        { name: 'Encadr√© "DIFF√âRENCE #1" extrait', test: lowerSummary.includes('diff√©rence #1') || lowerSummary.includes('je cr√©e ma vie') },
        { name: 'Encadr√© "SYST√àME DE POTS" extrait', test: lowerSummary.includes('syst√®me de pots') || lowerSummary.includes('55% n√©cessit√©s') },
        { name: 'Encadr√© "ENGAGEMENT FINAL" extrait', test: lowerSummary.includes('engagement final') || lowerSummary.includes('penser comme un millionnaire') },
        
        // Citations exactes
        { name: 'Citation T. Harv Eker extraite', test: lowerSummary.includes('plan financier inconscient') },
        { name: 'Citation Warren Buffett extraite', test: lowerSummary.includes('warren buffett') && lowerSummary.includes('risque') },
        { name: 'Citation Jim Rohn extraite', test: lowerSummary.includes('jim rohn') && lowerSummary.includes('moyenne des cinq') },
        { name: 'Citation Robert Kiyosaki extraite', test: lowerSummary.includes('robert kiyosaki') || lowerSummary.includes('p√®re riche') },
        
        // Donn√©es chiffr√©es pr√©cises
        { name: 'Statistique "80%" extraite', test: lowerSummary.includes('80%') && lowerSummary.includes('autonomie financi√®re') },
        { name: 'Calculs investissement 100$/mois extraits', test: lowerSummary.includes('100$') && lowerSummary.includes('349 101') },
        { name: 'Pourcentages syst√®me pots extraits', test: lowerSummary.includes('55%') && lowerSummary.includes('10%') },
        
        // Exercices et techniques
        { name: 'Exercice "D√âCLARATIONS" extrait', test: lowerSummary.includes('esprit millionnaire') && lowerSummary.includes('3 fois par jour') },
        { name: 'Technique comptes multiples extraite', test: lowerSummary.includes('6 comptes') || lowerSummary.includes('comptes multiples') },
        { name: 'Technique d√©programmation extraite', test: lowerSummary.includes('d√©programmation') || lowerSummary.includes('croyances limitantes') },
        
        // Histoires et exemples
        { name: 'Histoire divorce parents extraite', test: lowerSummary.includes('2 ans et demi') || lowerSummary.includes('divorce') },
        { name: 'Exemple premi√®re propri√©t√© extrait', test: lowerSummary.includes('premi√®re propri√©t√©') || lowerSummary.includes('mise de fonds') },
        { name: 'Histoire homme 30 000$ extraite', test: lowerSummary.includes('30 000') && lowerSummary.includes('40 000') },
        
        // Plans d'action d√©taill√©s
        { name: 'Plan d\'action imm√©diat extrait', test: lowerSummary.includes('semaine 1-2') || lowerSummary.includes('plan d\'action') },
        { name: 'Plan 12 mois extrait', test: lowerSummary.includes('mois 1-3') && lowerSummary.includes('mois 10-12') },
        
        // Diff√©rences riches/pauvres
        { name: 'Phrases typiques riches extraites', test: lowerSummary.includes('comment puis-je me permettre') },
        { name: 'Phrases typiques pauvres extraites', test: lowerSummary.includes('je n\'ai pas les moyens') },
        { name: 'Phrases classe moyenne extraites', test: lowerSummary.includes('travailler dur pour r√©ussir') },
        
        // R√©f√©rences et ressources
        { name: 'Livres recommand√©s extraits', test: lowerSummary.includes('p√®re riche, p√®re pauvre') },
        { name: 'S√©minaires mentionn√©s extraits', test: lowerSummary.includes('millionaire mind intensive') },
        
        // Structure et formatage
        { name: 'Format premium appliqu√©', test: summary.includes('#') && summary.includes('**') },
        { name: 'Emojis structurants pr√©sents', test: /[\u{1F300}-\u{1F6FF}]/u.test(summary) },
        { name: 'Tableaux ou listes pr√©sents', test: summary.includes('|') || summary.includes('-') },
        
        // Compl√©tude g√©n√©rale
        { name: 'Longueur suffisante (>5000 chars)', test: summary.length > 5000 },
        { name: 'Contenu substantiel (>50 lignes)', test: summary.split('\n').length > 50 }
      ];
      
      let passed = 0;
      let critical = 0;
      
      qualityChecks.forEach((check, index) => {
        const status = check.test ? '‚úÖ' : '‚ùå';
        const isCritical = index < 15; // Les 15 premiers sont critiques
        console.log(`${status} ${check.name} ${isCritical ? '(CRITIQUE)' : ''}`);
        if (check.test) {
          passed++;
          if (isCritical) critical++;
        }
      });
      
      const criticalPassed = critical;
      const totalCritical = 15;
      
      console.log(`\nüìä R√âSULTATS DE QUALIT√â:`);
      console.log(`‚úÖ Tests CRITIQUES r√©ussis: ${criticalPassed}/${totalCritical} (${Math.round(criticalPassed/totalCritical*100)}%)`);
      console.log(`‚úÖ Tests TOTAUX r√©ussis: ${passed}/${qualityChecks.length} (${Math.round(passed/qualityChecks.length*100)}%)`);
      console.log(`üìù Longueur r√©sum√©: ${summary.length} caract√®res`);
      
      if (criticalPassed >= totalCritical * 0.9) {
        console.log('\nüèÜ QUALIT√â EXCEPTIONNELLE ! Extraction ultra-exhaustive r√©ussie !');
      } else if (criticalPassed >= totalCritical * 0.7) {
        console.log('\nüëç Qualit√© correcte mais perfectible');
      } else {
        console.log('\n‚ö†Ô∏è Qualit√© insuffisante - Extraction incompl√®te');
      }
      
      return criticalPassed >= totalCritical * 0.8;
    } else {
      console.log('‚ùå EXTRACTION √âCHOU√âE:', result.error);
      return false;
    }
    
  } catch (error) {
    console.error('üí• ERREUR TEST:', error.message);
    return false;
  }
}

// Lancer le test ultime
console.log('üéØ LANCEMENT DU TEST ULTIME DE QUALIT√â');
console.log('=====================================\n');

testUltimateQuality()
  .then(success => {
    if (success) {
      console.log('\nüéâ TEST ULTIME R√âUSSI !');
      console.log('üöÄ Syst√®me d\'extraction ultra-exhaustif op√©rationnel');
      console.log('üìö R√©sum√©s de qualit√© maximale garantis');
    } else {
      console.log('\n‚ö†Ô∏è Test ultime √©chou√© - Ajustements n√©cessaires');
    }
  })
  .catch(console.error);
